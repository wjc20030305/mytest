<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>é˜²è¯ˆå°æµ‹éªŒ</title>
    <style>
        :root {
            --primary-cyan: #20B2AA; /* å¹³å°é’ */
            --primary-cyan-light: #E0F7FA;
            --secondary-orange: #FF9F43; /* æš–æ©™ */
            --secondary-pink: #FF6B6B;
            --text-main: #333333;
            --text-sub: #666666;
            --bg-page: #F4F8FB;
            --white: #FFFFFF;
            --success: #4CD964;
            --error: #FF5E57;
        }

        * {
            box-sizing: border-box;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-page);
            color: var(--text-main);
            padding-top: 60px; /* Header height */
            padding-bottom: 90px; /* Footer height */
            overflow-x: hidden;
        }

        /* --- é¡¶éƒ¨å¯¼èˆª --- */
        .nav-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 60px;
            background: var(--white);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 16px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            z-index: 100;
        }
        .nav-back {
            font-size: 24px;
            color: var(--text-main);
            cursor: pointer;
            width: 40px;
        }
        .nav-title {
            font-size: 18px;
            font-weight: bold;
        }
        .nav-progress {
            display: flex;
            align-items: center;
            font-size: 12px;
            color: var(--text-sub);
        }
        .progress-track {
            width: 60px;
            height: 6px;
            background: #EEE;
            border-radius: 3px;
            margin-left: 8px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: var(--primary-cyan);
            width: 0%;
            transition: width 0.3s ease;
        }

        /* --- å¤´éƒ¨å¼•å¯¼åŒº --- */
        .header-card {
            background: linear-gradient(135deg, #20B2AA 0%, #4DD0E1 100%);
            padding: 24px 20px;
            color: var(--white);
            position: relative;
            overflow: hidden;
            border-bottom-left-radius: 24px;
            border-bottom-right-radius: 24px;
            margin-bottom: 20px;
        }
        .header-content h1 {
            margin: 0 0 8px 0;
            font-size: 22px;
            line-height: 1.3;
        }
        .header-content p {
            margin: 0;
            font-size: 14px;
            opacity: 0.9;
        }
        .header-illustration {
            position: absolute;
            right: 10px;
            bottom: 10px;
            font-size: 60px;
            filter: drop-shadow(0 4px 4px rgba(0,0,0,0.1));
            animation: float 3s ease-in-out infinite;
        }
        .balloon {
            position: absolute;
            right: 70px;
            top: 20px;
            background: var(--white);
            color: var(--primary-cyan);
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            animation: pop 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }
        .header-tips {
            margin-top: 12px;
            font-size: 12px;
            opacity: 0.8;
            background: rgba(255,255,255,0.2);
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
        }

        /* --- é¢˜ç›®åˆ—è¡¨åŒº --- */
        .question-list {
            padding: 0 16px;
        }
        .question-card {
            background: var(--white);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.03);
            transition: transform 0.2s;
        }
        .q-header {
            display: flex;
            align-items: flex-start;
            margin-bottom: 16px;
        }
        .q-tag {
            background: var(--secondary-orange);
            color: var(--white);
            font-size: 12px;
            padding: 4px 8px;
            border-radius: 12px;
            margin-right: 10px;
            white-space: nowrap;
            flex-shrink: 0;
        }
        .q-text {
            font-size: 16px;
            font-weight: 500;
            line-height: 1.5;
            color: var(--text-main);
        }
        .q-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .option-item {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            border: 1px solid #EEE;
            border-radius: 12px;
            font-size: 15px;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }
        /* é€‰é¡¹çŠ¶æ€æ ·å¼ */
        .option-item.selected {
            background: var(--primary-cyan);
            color: var(--white);
            border-color: var(--primary-cyan);
            font-weight: bold;
        }
        .option-item.selected::after {
            content: 'âœ”';
            position: absolute;
            right: 16px;
        }
        .option-item.disabled {
            pointer-events: none;
            opacity: 0.8;
        }
        /* é”™è¯¯çŠ¶æ€ (ç”¨äºç‚¹é”™æ—¶çš„é«˜äº®) */
        .option-item.wrong {
            background: var(--error);
            color: var(--white);
            border-color: var(--error);
        }
        .option-item.wrong::after {
            content: 'âœ˜';
            position: absolute;
            right: 16px;
        }

        /* --- ç­”æ¡ˆåé¦ˆ --- */
        .feedback-box {
            margin-top: 16px;
            padding: 12px;
            border-radius: 8px;
            font-size: 14px;
            display: none; /* é»˜è®¤éšè— */
            animation: fadeIn 0.4s ease;
        }
        .feedback-box.correct {
            background: #E8F5E9;
            color: #2E7D32;
            border: 1px solid #C8E6C9;
        }
        .feedback-box.wrong {
            background: #FFEBEE;
            color: #C62828;
            border: 1px solid #FFCDD2;
        }
        .feedback-title {
            font-weight: bold;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        /* --- åº•éƒ¨æäº¤åŒº --- */
        .footer-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 80px;
            background: var(--white);
            box-shadow: 0 -4px 10px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 0 20px;
            z-index: 90;
            transform: translateY(100%);
            transition: transform 0.3s ease;
        }
        .footer-bar.show {
            transform: translateY(0);
        }
        .footer-info {
            font-size: 12px;
            color: var(--text-sub);
            margin-bottom: 6px;
        }
        .btn-submit {
            width: 100%;
            height: 44px;
            background: var(--primary-cyan);
            color: var(--white);
            border: none;
            border-radius: 22px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(32, 178, 170, 0.3);
        }
        .btn-submit:active {
            transform: scale(0.98);
        }

        /* --- ç»“æœå…¨å±å±‚ --- */
        .result-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-page);
            z-index: 200;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 30px;
            text-align: center;
            animation: slideUp 0.4s ease;
        }
        .result-icon {
            font-size: 80px;
            margin-bottom: 20px;
        }
        .result-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--text-main);
        }
        .result-desc {
            font-size: 16px;
            color: var(--text-sub);
            margin-bottom: 30px;
            line-height: 1.6;
        }
        .result-btn {
            width: 80%;
            height: 50px;
            border-radius: 25px;
            border: none;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 16px;
            cursor: pointer;
        }
        .btn-primary {
            background: var(--primary-cyan);
            color: var(--white);
            box-shadow: 0 6px 15px rgba(32, 178, 170, 0.4);
        }
        .btn-secondary {
            background: #E0E0E0;
            color: #666;
        }

        /* --- è‡ªå®šä¹‰å¼¹çª— --- */
        .modal-mask {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 300;
            display: none;
            align-items: center;
            justify-content: center;
        }
        .modal-box {
            background: var(--white);
            width: 80%;
            border-radius: 16px;
            padding: 24px;
            text-align: center;
        }
        .modal-title { font-size: 18px; font-weight: bold; margin-bottom: 10px; }
        .modal-text { font-size: 14px; color: #666; margin-bottom: 20px; }
        .modal-actions { display: flex; gap: 10px; }
        .modal-btn { flex: 1; padding: 10px; border-radius: 8px; border: none; font-weight: bold; }
        .btn-cancel { background: #F5F5F5; color: #666; }
        .btn-confirm { background: var(--secondary-pink); color: white; }

        /* åŠ¨ç”»å…³é”®å¸§ */
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        @keyframes pop { 0% { transform: scale(0); } 80% { transform: scale(1.1); } 100% { transform: scale(1); } }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
    </style>
</head>
<body>

    <!-- å¯¼èˆªæ  -->
    <nav class="nav-bar">
        <div class="nav-back" onclick="showExitModal()">â†</div>
        <div class="nav-title">é˜²è¯ˆå°æµ‹éªŒ</div>
        <div class="nav-progress">
            <span id="progress-text">0/5 é¢˜</span>
            <div class="progress-track">
                <div class="progress-fill" id="progress-bar"></div>
            </div>
        </div>
    </nav>

    <!-- å¤´éƒ¨å¼•å¯¼ -->
    <header class="header-card">
        <div class="balloon">åŠ æ²¹å“¦ï¼ğŸˆ</div>
        <div class="header-content">
            <h1>å®Œæˆå°æµ‹éªŒ<br>å®‰å…¨äº¤å‹æ›´å®‰å¿ƒï½</h1>
            <p>å…±5é“å•é€‰é¢˜ï¼Œç­”å¯¹4é¢˜(80%)å³å¯é€šè¿‡</p>
            <div class="header-tips">ğŸ’¡ é”™é¢˜å¯æŸ¥çœ‹è§£æï¼Œæœ‰å¤šæ¬¡æœºä¼š</div>
        </div>
        <div class="header-illustration">ğŸ›¡ï¸</div>
    </header>

    <!-- é¢˜ç›®åˆ—è¡¨å®¹å™¨ -->
    <div id="quiz-container" class="question-list">
        <!-- é¢˜ç›®å°†é€šè¿‡JSåŠ¨æ€æ’å…¥ -->
    </div>

    <!-- åº•éƒ¨æäº¤åŒº -->
    <div class="footer-bar" id="footer-bar">
        <div class="footer-info">å·²å®Œæˆæ‰€æœ‰é¢˜ç›®ï¼Œç­”å¯¹ç‡éœ€â‰¥80%</div>
        <button class="btn-submit" onclick="submitQuiz()">æäº¤ç­”æ¡ˆ</button>
    </div>

    <!-- ç»“æœå±‚ï¼šæˆåŠŸ -->
    <div class="result-overlay" id="result-pass" style="background: linear-gradient(180deg, #E0F7FA 0%, #FFFFFF 100%);">
        <div class="result-icon">ğŸ‰</div>
        <div class="result-title" style="color: #2E7D32;">æ­å–œé€šè¿‡ï¼</div>
        <div class="result-desc">
            ä½ å·²æŒæ¡åŸºæœ¬é˜²è¯ˆçŸ¥è¯†ï½<br>
            è´¦å·å¤„ç½šå·²è§£é™¤ï¼Œç»§ç»­æ„‰å¿«èŠå¤©å§ï¼
        </div>
        <button class="result-btn btn-primary" onclick="closeH5()">è¿”å›App</button>
    </div>

    <!-- ç»“æœå±‚ï¼šå¤±è´¥ -->
    <div class="result-overlay" id="result-fail" style="background: linear-gradient(180deg, #FFF3E0 0%, #FFFFFF 100%);">
        <div class="result-icon">ğŸ˜¢</div>
        <div class="result-title" style="color: #E65100;">å†æ¥å†å‰ï½</div>
        <div class="result-desc">
            æœ¬æ¬¡ç­”å¯¹ <span id="score-val" style="color: #FF5E57; font-weight:bold;">0</span>/5 é¢˜<br>
            è¿˜éœ€ç­”å¯¹ 4 é¢˜æ‰èƒ½é€šè¿‡å“¦ã€‚<br>
            æŸ¥çœ‹è§£æåé‡æ–°æŒ‘æˆ˜å§ï¼
        </div>
        <button class="result-btn btn-primary" onclick="restartQuiz()">é‡æ–°ç­”é¢˜</button>
        <button class="result-btn btn-secondary" onclick="hideResult()">æŸ¥çœ‹é”™é¢˜è§£æ</button>
    </div>

    <!-- é€€å‡ºç¡®è®¤å¼¹çª— -->
    <div class="modal-mask" id="exit-modal">
        <div class="modal-box">
            <div class="modal-title">ç¡®å®šè¦é€€å‡ºå—ï¼Ÿ</div>
            <div class="modal-text">æœªå®Œæˆæµ‹éªŒå°†æ— æ³•è§£é™¤å¤„ç½š<br>ç°åœ¨çš„è¿›åº¦å°†ä¸ä¼šä¿å­˜ã€‚</div>
            <div class="modal-actions">
                <button class="modal-btn btn-cancel" onclick="closeExitModal()">å–æ¶ˆ</button>
                <button class="modal-btn btn-confirm" onclick="confirmExit()">ç¡®å®šé€€å‡º</button>
            </div>
        </div>
    </div>

<script>
    /* --- é¢˜åº“æ•°æ® (æ¨¡æ‹Ÿ15é“é¢˜) --- */
    const questionBank = [
        { id: 1, type: "è¯ˆéª—", q: "é™Œç”Ÿäººå¿«é€Ÿå‘ä½ è¦é’±ã€å€Ÿé’±æˆ–è®©ä½ æŠ•èµ„ï¼Œé€šå¸¸æ˜¯ï¼Ÿ", options: ["çœŸçˆ±æ¥äº†", "æ€çŒªç›˜è¯ˆéª—", "ç³»ç»Ÿæµ‹è¯•", "æœ‹å‹æ€¥ç”¨"], answer: 1, explain: "è¿™æ˜¯å…¸å‹çš„'æ€çŒªç›˜'éª—å±€ï¼Œå…ˆå…»æ„Ÿæƒ…å†è¯±å¯¼æŠ•èµ„ï¼Œåˆ‡å‹¿è½¬è´¦ï¼" },
        { id: 2, type: "è§„åˆ™", q: "å¹³å°å†…ç¦æ­¢å‘é€å“ªç±»ä¿¡æ¯ï¼Ÿ", options: ["æ—¥å¸¸é—®å€™", "é£æ™¯ç…§ç‰‡", "ç¬¬ä¸‰æ–¹èµŒåš/è‰²æƒ…é“¾æ¥", "è¯­éŸ³æ¶ˆæ¯"], answer: 2, explain: "ä¸ºäº†å®‰å…¨ï¼Œä¸¥ç¦å‘é€é»„èµŒæ¯’åŠç¬¬ä¸‰æ–¹ä¸æ˜é“¾æ¥ï¼Œè¿è€…å°å·ã€‚" },
        { id: 3, type: "Tips", q: "å¯¹æ–¹æå‡º'ä¸åœ¨å¹³å°èŠï¼ŒåŠ QQ/å¾®ä¿¡è£¸èŠ'ï¼Œä½ åº”è¯¥ï¼Ÿ", options: ["ç«‹åˆ»åŒæ„", "æ‹’ç»å¹¶ä¸¾æŠ¥", "å¥½å¥‡è¯•è¯•", "å‘é€è‡ªå·±ç…§ç‰‡"], answer: 1, explain: "è£¸èŠæ˜¯æ•²è¯ˆå‹’ç´¢çš„é«˜å‘åŒºï¼Œä¸€æ—¦å½•åƒå°†è¢«å‹’ç´¢é’±è´¢ï¼Œè¯·ç«‹å³ä¸¾æŠ¥ã€‚" },
        { id: 4, type: "è¯ˆéª—", q: "å¯¹æ–¹å£°ç§°æ˜¯'ç³»ç»Ÿå®¢æœ'ï¼Œè¦æ±‚ä½ æä¾›ç™»å½•éªŒè¯ç ï¼Œæ˜¯ä¸ºäº†ï¼Ÿ", options: ["å¸®ä½ å‡çº§", "ç›—å–ä½ çš„è´¦å·", "é€ä½ ç¤¼ç‰©", "éªŒè¯èº«ä»½"], answer: 1, explain: "å®˜æ–¹å®¢æœç»ä¸ä¼šç´¢è¦éªŒè¯ç ï¼Œç´¢è¦éªŒè¯ç çš„ä¸€å¾‹æ˜¯éª—å­ï¼" },
        { id: 5, type: "Tips", q: "ç¬¬ä¸€æ¬¡çº¿ä¸‹è§é¢ï¼Œå“ªé‡Œæœ€å®‰å…¨ï¼Ÿ", options: ["å¯¹æ–¹å®¶é‡Œ", "ååƒ»å…¬å›­", "äººå¤šçš„å…¬å…±åœºæ‰€", "æ·±å¤œé…’å§"], answer: 2, explain: "åˆæ¬¡è§é¢è¯·é€‰æ‹©äººæµé‡å¤§ã€å…‰çº¿æ˜äº®çš„å…¬å…±åœºæ‰€ï¼Œä¿æŠ¤äººèº«å®‰å…¨ã€‚" },
        { id: 6, type: "è¯ˆéª—", q: "å…³äº'é«˜å›æŠ¥ä½é£é™©'çš„æŠ•èµ„ç†è´¢æ¨èï¼ŒçœŸç›¸æ˜¯ï¼Ÿ", options: ["å¤©ä¸Šæ‰é¦…é¥¼", "è¯ˆéª—é™·é˜±", "å‘è´¢æœºä¼š", "å†…éƒ¨æ¶ˆæ¯"], answer: 1, explain: "é«˜å›æŠ¥å¿…ç„¶ä¼´éšé«˜é£é™©ï¼Œä¿æœ¬é«˜æ”¶ç›Šé€šå¸¸æ˜¯è¯ˆéª—è¯±é¥µã€‚" },
        { id: 7, type: "è§„åˆ™", q: "å¦‚æœåœ¨èŠå¤©ä¸­å—åˆ°éªšæ‰°æˆ–è¾±éª‚ï¼Œæœ€å¥½çš„å¤„ç†æ–¹å¼æ˜¯ï¼Ÿ", options: ["éª‚å›å»", "å¿æ°”åå£°", "ä½¿ç”¨å¹³å°ä¸¾æŠ¥åŠŸèƒ½", "å¸è½½APP"], answer: 2, explain: "é‡åˆ°éªšæ‰°è¯·å–„ç”¨å³ä¸Šè§’ä¸¾æŠ¥åŠŸèƒ½ï¼Œå¹³å°å°å«å£«ä¼šå¸®ä½ å¤„ç†ï¼" },
        { id: 8, type: "è¯ˆéª—", q: "å¯¹æ–¹å‘æ¥ä¸€ä¸ªé“¾æ¥è¯´'å¸®æˆ‘ç‚¹ä¸€ä¸‹æŠ•ç¥¨'ï¼Œç‚¹å‡»åéœ€è¦è¾“å…¥é“¶è¡Œå¡å¯†ç ï¼Œä½ åº”è¯¥ï¼Ÿ", options: ["è¾“å…¥å¯†ç ", "ç«‹å³å…³é—­", "è½¬å‘ç»™æœ‹å‹", "æˆªå›¾ç•™å¿µ"], answer: 1, explain: "æ­£è§„æŠ•ç¥¨ä¸éœ€è¦é“¶è¡Œå¡å¯†ç ï¼Œè¿™æ˜¯é’“é±¼ç½‘ç«™ï¼Œæ—¨åœ¨ç›—åˆ·èµ„é‡‘ã€‚" },
        { id: 9, type: "Tips", q: "ä¸ºäº†ä¿æŠ¤éšç§ï¼Œä»¥ä¸‹å“ªä¸ªä¿¡æ¯ä¸å»ºè®®è¿‡æ—©é€éœ²ï¼Ÿ", options: ["å…´è¶£çˆ±å¥½", "å®¶åº­ä½å€/å…¬å¸å", "å–œæ¬¢çš„ç”µå½±", "æ˜Ÿåº§"], answer: 1, explain: "è¯¦ç»†ä½å€ã€å·¥ä½œå•ä½ç­‰æ ¸å¿ƒéšç§è¯·å‹¿éšæ„é€éœ²ç»™é™Œç”Ÿäººã€‚" },
        { id: 10, type: "è§„åˆ™", q: "å¦‚ä½•è¾¨åˆ«è´¦å·æ˜¯å¦å·²é€šè¿‡çœŸäººè®¤è¯ï¼Ÿ", options: ["çœ‹å¤´åƒå¸…ä¸å¸…", "çœ‹æ˜¯å¦æœ‰å®˜æ–¹è®¤è¯æ ‡è¯†", "å¬å£°éŸ³", "çœ‹æ³¨å†Œæ—¶é—´"], answer: 1, explain: "è¯·è®¤å‡†æ˜µç§°æ—çš„å®˜æ–¹å®å/çœŸäººè®¤è¯å›¾æ ‡ï¼Œå®‰å…¨æ€§æ›´é«˜ã€‚" },
        { id: 11, type: "è¯ˆéª—", q: "å–èŒ¶å¥³/æ”¯æ•™è€å¸ˆçªç„¶åŠ ä½ ï¼ŒèŠä¹…äº†è¯´çˆ·çˆ·ç—…äº†è¦å–èŒ¶ï¼Œè¿™æ˜¯ï¼Ÿ", options: ["éœ€è¦å¸®åŠ©", "ç¼˜åˆ†", "å‰§æœ¬å¼è¯ˆéª—", "çœŸå®åˆ›ä¸š"], answer: 2, explain: "è¿™æ˜¯ç»å…¸å‰§æœ¬è¯ˆéª—ï¼Œåˆ©ç”¨åŒæƒ…å¿ƒé«˜ä»·å”®å–åŠ£è´¨äº§å“ã€‚" },
        { id: 12, type: "Tips", q: "é¢åŸºæ—¶å¯¹æ–¹æä¾›çš„é¥®æ–™ï¼Œç¦»å¼€è§†çº¿åè¿˜å¯ä»¥å–å—ï¼Ÿ", options: ["æ²¡å…³ç³»", "åšå†³ä¸å–", "å°‘å–ä¸€ç‚¹", "çœ‹å¯¹æ–¹å–æ²¡å–"], answer: 1, explain: "é˜²äººä¹‹å¿ƒä¸å¯æ— ï¼Œç¦»å¼€è§†çº¿çš„é£Ÿç‰©é¥®æ–™å¯èƒ½è¢«ä¸‹è¯ï¼Œåšå†³ä¸å–ã€‚" },
        { id: 13, type: "è¯ˆéª—", q: "å¯¹æ–¹è‡ªç§°'ç¾å›½å¤§å…µ'æˆ–'ç»´å’Œéƒ¨é˜Ÿ'ï¼Œå¯„åŒ…è£¹ç»™ä½ éœ€è¦ä½ ä»˜è¿è´¹ï¼Œè¿™æ˜¯ï¼Ÿ", options: ["å›½é™…è¯ˆéª—", "æµªæ¼«çˆ±æƒ…", "çœŸå®æ±‚åŠ©", "è·¨å›½å‹è°Š"], answer: 0, explain: "å…¸å‹çš„è·¨å›½åŒ…è£¹è¯ˆéª—ï¼Œåƒä¸‡ä¸è¦æ”¯ä»˜ä»»ä½•å…³ç¨æˆ–è¿è´¹ã€‚" },
        { id: 14, type: "è§„åˆ™", q: "é‡åˆ°è¯±å¯¼ä½ ä¸‹è½½å…¶ä»–ä¸çŸ¥åAPPè¿›è¡Œè§†é¢‘èŠå¤©çš„ï¼Œé€šå¸¸æ˜¯ï¼Ÿ", options: ["æ›´å¥½ç”¨", "å¼•æµè¯ˆéª—", "çœæµé‡", "åŠŸèƒ½å¤š"], answer: 1, explain: "ä¸çŸ¥åAPPå¯èƒ½æ¤å…¥æœ¨é©¬æˆ–åŒ…å«åšå½©è¯ˆéª—ä¿¡æ¯ï¼Œè¯·å‹¿ä¸‹è½½ã€‚" },
        { id: 15, type: "Tips", q: "å‘ç°è‡ªå·±å¯èƒ½è¢«éª—äº†é’±ï¼Œç¬¬ä¸€æ­¥åšä»€ä¹ˆï¼Ÿ", options: ["è‡ªè®¤å€’éœ‰", "æ‰¾å¯¹æ–¹ç†è®º", "ç«‹å³æŠ¥è­¦å¹¶è”ç³»å¹³å°", "åˆ é™¤å¥½å‹"], answer: 2, explain: "ä¿ç•™èŠå¤©å’Œè½¬è´¦è®°å½•ï¼Œç¬¬ä¸€æ—¶é—´æŠ¥è­¦ï¼Œé»„é‡‘æ—¶é—´å¯è¿½å›æŸå¤±ã€‚" }
    ];

    /* --- å…¨å±€çŠ¶æ€ --- */
    let currentQuestions = [];
    let userAnswers = {}; // { questionId: optionIndex }
    let answeredCount = 0;
    const TOTAL_QUESTIONS = 5;

    /* --- åˆå§‹åŒ– --- */
    function init() {
        // éšæœºæŠ½å–5é¢˜
        const shuffled = questionBank.sort(() => 0.5 - Math.random());
        currentQuestions = shuffled.slice(0, TOTAL_QUESTIONS);
        userAnswers = {};
        answeredCount = 0;
        
        renderQuestions();
        updateProgress();
        document.getElementById('footer-bar').classList.remove('show');
        document.getElementById('result-pass').style.display = 'none';
        document.getElementById('result-fail').style.display = 'none';
        
        // æ»šåŠ¨å›é¡¶éƒ¨
        window.scrollTo(0, 0);
    }

    /* --- æ¸²æŸ“é¢˜ç›® --- */
    function renderQuestions() {
        const container = document.getElementById('quiz-container');
        container.innerHTML = '';

        currentQuestions.forEach((item, index) => {
            const card = document.createElement('div');
            card.className = 'question-card';
            card.id = `q-card-${item.id}`;

            let optionsHtml = '';
            item.options.forEach((opt, optIndex) => {
                optionsHtml += `<div class="option-item" onclick="selectOption(${item.id}, ${optIndex}, ${item.answer}, this)">${String.fromCharCode(65+optIndex)}. ${opt}</div>`;
            });

            card.innerHTML = `
                <div class="q-header">
                    <span class="q-tag">ç¬¬${index + 1}é¢˜</span>
                    <div class="q-text">${item.q}</div>
                </div>
                <div class="q-options" id="opt-group-${item.id}">
                    ${optionsHtml}
                </div>
                <div class="feedback-box" id="feedback-${item.id}">
                    <div class="feedback-title" id="fb-title-${item.id}"></div>
                    <div class="feedback-text">${item.explain}</div>
                </div>
            `;
            container.appendChild(card);
        });
    }

    /* --- é€‰æ‹©é€‰é¡¹é€»è¾‘ --- */
    function selectOption(qId, optIndex, correctIndex, elem) {
        // å¦‚æœè¯¥é¢˜å·²ç­”è¿‡ï¼Œä¸å¯é‡å¤é€‰æ‹©
        if (userAnswers.hasOwnProperty(qId)) return;

        // è®°å½•ç­”æ¡ˆ
        userAnswers[qId] = optIndex;
        answeredCount++;

        // UI çŠ¶æ€æ›´æ–°
        const isCorrect = (optIndex === correctIndex);
        
        // æ ·å¼å¤„ç†
        if (isCorrect) {
            elem.classList.add('selected');
        } else {
            elem.classList.add('wrong');
            // é«˜äº®æ­£ç¡®ç­”æ¡ˆ
            const group = document.getElementById(`opt-group-${qId}`);
            group.children[correctIndex].classList.add('selected'); 
        }

        // ç¦ç”¨è¯¥é¢˜æ‰€æœ‰é€‰é¡¹
        const group = document.getElementById(`opt-group-${qId}`);
        Array.from(group.children).forEach(child => child.classList.add('disabled'));

        // æ˜¾ç¤ºè§£æ
        const fbBox = document.getElementById(`feedback-${qId}`);
        const fbTitle = document.getElementById(`fb-title-${qId}`);
        
        fbBox.style.display = 'block';
        if (isCorrect) {
            fbBox.classList.add('correct');
            fbTitle.innerHTML = 'âœ¨ ç­”å¯¹å•¦ï½';
        } else {
            fbBox.classList.add('wrong');
            fbTitle.innerHTML = 'ğŸ¤” å†æƒ³æƒ³å“¦ï½';
        }

        // æ›´æ–°è¿›åº¦
        updateProgress();

        // æ£€æŸ¥æ˜¯å¦å…¨éƒ¨å®Œæˆ
        if (answeredCount === TOTAL_QUESTIONS) {
            document.getElementById('footer-bar').classList.add('show');
            // è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨æ–¹ä¾¿çœ‹åˆ°æäº¤æŒ‰é’®
            setTimeout(() => {
                window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
            }, 300);
        }
    }

    /* --- æ›´æ–°è¿›åº¦æ¡ --- */
    function updateProgress() {
        const percent = (answeredCount / TOTAL_QUESTIONS) * 100;
        document.getElementById('progress-bar').style.width = `${percent}%`;
        document.getElementById('progress-text').innerText = `${answeredCount}/${TOTAL_QUESTIONS} é¢˜`;
    }

    /* --- æäº¤ä¸åˆ¤åˆ† --- */
    function submitQuiz() {
        let score = 0;
        currentQuestions.forEach(q => {
            if (userAnswers[q.id] === q.answer) {
                score++;
            }
        });

        const passThreshold = 4; // 80% of 5
        
        if (score >= passThreshold) {
            // é€šè¿‡
            document.getElementById('result-pass').style.display = 'flex';
        } else {
            // æœªé€šè¿‡
            document.getElementById('score-val').innerText = score;
            document.getElementById('result-fail').style.display = 'flex';
        }
    }

    /* --- äº¤äº’æ§åˆ¶ --- */
    function restartQuiz() {
        init();
    }

    function hideResult() {
        // ä»…éšè—ç»“æœå±‚ï¼Œå…è®¸æŸ¥çœ‹å½“å‰é¡µé¢çš„è§£æ
        document.getElementById('result-fail').style.display = 'none';
        document.getElementById('footer-bar').classList.remove('show'); // éšè—æäº¤æŒ‰é’®ï¼Œé˜²æ­¢é‡å¤æäº¤
    }

    function closeH5() {
        // æ¨¡æ‹Ÿå…³é—­ Webview æˆ–å›è°ƒåŸç”Ÿ App
        console.log("Call Native: Penalty Lifted");
        try {
            // å¦‚æœæ˜¯åœ¨Appå†…ï¼Œè¿™é‡Œè°ƒç”¨åŸç”Ÿåè®®ï¼Œä¾‹å¦‚ï¼š
            // window.location.href = "app://close?status=success";
            alert("æ¨¡æ‹Ÿï¼šå›è°ƒAppè§£é™¤å¤„ç½šï¼Œå…³é—­é¡µé¢");
        } catch(e) {}
    }

    /* --- é€€å‡ºæ‹¦æˆª --- */
    function showExitModal() {
        document.getElementById('exit-modal').style.display = 'flex';
    }
    
    function closeExitModal() {
        document.getElementById('exit-modal').style.display = 'none';
    }

    function confirmExit() {
        // æ¨¡æ‹Ÿé€€å‡º
        try {
            // window.location.href = "app://back";
            alert("æ¨¡æ‹Ÿï¼šé€€å‡ºH5é¡µé¢");
            closeExitModal();
        } catch(e) {}
    }

    // å¯åŠ¨
    init();

</script>
</body>
</html>